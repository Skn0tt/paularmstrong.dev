---
title: DIY photobooth, in-depth
description: I created my own photobooth application with Electron, Node.js, React, and Tailwindcss and used a GoPro as a webcam for my wedding instead of renting a commercial booth. It was fun to build and even more fun to use.
pubDate: 2022-10-12
toc: true
draft: true
heroImage:
  src: /img/blog/photobooth/main-screen.jpg
  width: 1277
  height: 799
---

## The plan

Create an application with an easy to use user-interface

- Website w/ webcam
  - Electron application
  - Webcam
- Open GoPro
  - scratch, gopro as webcam
- controls: streamdeck
- state machine
  - xstate
  - save files
  - uploads
- ui
  - tailwindcss
  - ever-present video
- controls: touch screen
- cost breakdown

### Original plan

GoPro has an API called [Open GoPro](https://gopro.github.io/OpenGoPro/)? It's a fully documented API spec to control their cameras over Bluetooth LE, WiFi, and USB (some protocols better than others).

Unfortunately, after buying a brand new GoPro Hero 10 ($350) and spending at least 30 hours with the API over USB, I had to throw out the idea of using the API. The fact of it is that GoPro cameras are just _very slow_ at taking photos and being ready to take another photo. Probably fine out in the wild, since the cameras are rarely used for photos – typically just action video, but in a setting where timing and speed are key, controlling the camera with the API was just an absolute failure.

However, GoPros can also be used as webcams now, given that you have [the GoPro Webcam app](https://community.gopro.com/s/article/GoPro-Webcam) installed.

### Backup plan

## User interface

### Screens

- Main
  - Help
- Preferences
- Photo
  - Prepare
  - Taking photos
  - Choose layout
  - Save confirmation
- Record video
  - Prepare
  - Record video
  - Save confirmation

## State Machine

Given the complexity of managing state across two user interfaces, the screen and the StreamDeck Mini, I wanted to ensure that both were in sync at all times. To do this, I chose to build a full [state machine](https://github.com/paularmstrong/photobooth/blob/main/packages/main/src/state/machine.ts) using [x-state](https://xstate.js.org/), run by the Electron Node.js process.

<iframe
	class="aspect-square w-full"
	src="https://stately.ai/viz/embed/96da6066-02dc-448e-a9f9-7a8511767b31?mode=viz&panel=code&showOriginalLink=1&readOnly=1&pan=1&zoom=1&controls=1"
	sandbox="allow-same-origin allow-scripts"
/>

You can play with this more on the [Stately visualizer](https://stately.ai/viz/96da6066-02dc-448e-a9f9-7a8511767b31#).

## What went wrong

### GoPro overheating

Originally, I had bought a USB passthrough door for the battery cover. I took the battery out in hopes that it would both not drain on the battery and not overheat. Well, turns out that the door and lack of battery increased the heat of the GoPro and it ended up overheating. Thankfully, this was during our family dinner the night before the wedding. I set up the “Memory Shack” in our living room so that we could have a full test-run with it. Everything was great until I noticed that the video was really distorted, pointed downward, despite the camera being completely upright.

A very weird experience for sure. I took off the passthrough door and just left the unit completely open. This allowed enough air to fully flow in and out of the device, fixing the overheating problem.

### WiFi restrictions

I wrote a separate script to watch the folder that photos were saved into and automatically resize, compress, and upload to Firebase storage and add into the [wedding website](/blog/2022/06/04/custom-wedding-website-part-1). This worked great during the test run, but turns out our venue's wifi had some weird network restrictions running and no photos uploaded. It was a bummer that no one was able to download their photos at the event and share, but a quick fix the next morning got all of the photos uploaded to our gallery.

## Cost breakdown

| What                                                                                                                               | Cost     | Actual cost   |
| ---------------------------------------------------------------------------------------------------------------------------------- | -------- | ------------- |
| [Elgato Stream Deck Mini](https://www.elgato.com/en/stream-deck-mini)                                                              | owned    | $80           |
| [Portable USB-C screen](https://www.amazon.com/Lepow-C2S-1920%C3%971080P-Kickstand-Black/dp/B09H2WF8TY?ref_=ast_sto_dp&th=1&psc=1) | borrowed | $190          |
| [GoPro Hero 10](https://gopro.com/en/us/shop/cameras/hero10-black/CHDHX-101-master.html)                                           | owned    | $350          |
| [12" LED ring light](https://www.amazon.com/gp/product/B08DD36M29/ref=ppx_yo_dt_b_asin_title_o05_s00?ie=UTF8&psc=1)                | $40      | $40           |
| Wood & supplies for structure                                                                                                      | gifted   | ?             |
| Total                                                                                                                              | $40      | at least $660 |

So, given the cost breakdown, I like to tell myself that I only spent about $40 on the entire build – and even if I count every piece of hardware (less the actual computer that has to run the app), I would still be spending about $1,000 less than if I had rented a photobooth.

However, if you count how my time is worth money as well, I probably spent at least 100 hours in total across software and physical structure building – maybe more. I don't even want to try calculating a dollar amount on this.

I like to keep in mind that the time spent was also an investment into my own skills. I can now say that I've gone through building at least a decent piece of software using Electron, dug pretty deep into proper state machines, and become intimately familiar with the web Media APIs.
